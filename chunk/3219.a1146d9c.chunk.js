/*! For license information please see 3219.a1146d9c.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkacellus=self.webpackChunkacellus||[]).push([[3219],{12755:function(t,e,r){r.d(e,{Z:function(){return p}});var n=r(43681),i=r(44505),o=r(56825),a=r(69293),u=r(32250),s=r(70829),c=r(46417);function p(t){var e=t.onClick,r=t.customStyles,n=(0,a.Z)();return(0,c.jsx)(l,{onClick:e,schoolLevel:n,customStyles:r,children:(0,c.jsx)("div",{children:(0,c.jsx)(s.J,{onClick:e,circle:!0,color:"yellow",colorNum:500,schoolLevel:n,children:(0,c.jsx)(d,{schoolLevel:n,"aria-hidden":"true"})})})})}var l=n.Z.div((function(t){var e=t.schoolLevel,r=t.customStyles;return[{position:"relative",display:"flex",aspectRatio:"1.68",alignItems:"center",justifyContent:"center",borderStyle:"dashed !important",borderColor:"rgb(255 255 255 / 0.5) !important"},u.k,o.W,{E:{borderWidth:"8px !important"},M:{borderWidth:"6px !important"},H:{borderWidth:"4px !important"}}[e],r]})),d=(0,n.Z)(i.r)({height:"2rem",width:"2rem",strokeWidth:"2","@media (min-width: 1280px)":{height:"2.5rem",width:"2.5rem"}})},9366:function(t,e,r){r.d(e,{Z:function(){return v}});var n,i=r(30168),o=r(43681),a=r(47313),u=["title","titleId"];function s(){return s=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s.apply(this,arguments)}function c(t,e){if(null==t)return{};var r,n,i=function(t,e){if(null==t)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function p(t,e){var r=t.title,i=t.titleId,o=c(t,u);return a.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",ref:e,"aria-labelledby":i},o),r?a.createElement("title",{id:i},r):null,n||(n=a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 01-1.043 3.296 3.745 3.745 0 01-3.296 1.043A3.745 3.745 0 0112 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 01-3.296-1.043 3.745 3.745 0 01-1.043-3.296A3.745 3.745 0 013 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 011.043-3.296 3.746 3.746 0 013.296-1.043A3.746 3.746 0 0112 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 013.296 1.043 3.746 3.746 0 011.043 3.296A3.745 3.745 0 0121 12z"})))}var l,d=a.forwardRef(p),h=(r.p,r(57047)),b=r(88571),f=r(92088),m=r(32250),g=r(66725),y=r(46417);function v(t){var e=t.imageID,r=t.onClick,n=t.props,i=t.text,o=t.deleteFunc,a=t.status,u=(t.published,t.isPage),s=t.acellusID;return(0,y.jsxs)(x,{children:[(0,y.jsxs)(S,{onClick:r,children:[(0,y.jsx)(g.Z,{imageID:e,props:n}),u&&i&&(0,y.jsx)(C,{children:i})]}),a?s?1===a?(0,y.jsx)(A,{"aria-label":"Awaiting your approval","data-tooltip":"title",children:"New"}):(0,y.jsx)(j,{"aria-label":"Published","data-tooltip":"title"}):a>0?(0,y.jsx)(j,{"aria-label":"Published","data-tooltip":"title"}):(0,y.jsx)(y.Fragment,{}):(0,y.jsx)(y.Fragment,{}),o&&(0,y.jsx)(w,{onClick:o,"aria-label":"Delete","data-tooltip":"title",children:(0,y.jsx)(Z,{"aria-hidden":"true"})})]})}var x=o.Z.div(l||(l=(0,i.Z)(["\n  "," // translateZ(0) is for Safari (apparently it keeps the corners rounded, which for some reason become unrounded for canvases)\n  "," // Shared shadow/hover styles for clickable cards\n"])),{backgroundColor:"transparent",backgroundImage:"none",transform:"translateZ(0)"},m.k),w=o.Z.button({position:"absolute",right:"1rem",top:"1rem",padding:"0.5rem","--tw-text-opacity":"1",color:"rgb(243 244 246 / var(--tw-text-opacity))",transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"300ms",":hover":{"--tw-text-opacity":"1",color:"rgb(248 113 113 / var(--tw-text-opacity))"},":active":{"--tw-text-opacity":"1",color:"rgb(239 68 68 / var(--tw-text-opacity))"}}),Z=(0,o.Z)(b.r)({height:"2.5rem",width:"2.5rem"}),k={position:"absolute",left:"1.5rem",top:"1.5rem",height:"2.75rem",width:"2.75rem","--tw-text-opacity":"1",color:"rgb(255 255 255 / var(--tw-text-opacity))"},j=(0,o.Z)(d)((function(){return k})),S=((0,o.Z)(h.r)((function(){return k})),(0,o.Z)(f.r)((function(){return k}),{borderRadius:"9999px","--tw-bg-opacity":"1",backgroundColor:"rgb(239 68 68 / var(--tw-bg-opacity))"}),o.Z.button({display:"block",width:"100%"})),C=o.Z.p({position:"absolute",bottom:"0px",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","--tw-bg-opacity":"1",backgroundColor:"rgb(255 255 255 / var(--tw-bg-opacity))",paddingLeft:"2.5rem",paddingRight:"2.5rem",paddingTop:"1rem",paddingBottom:"1rem",textAlign:"center",fontFamily:"Plantin Infant MT Std","--tw-text-opacity":"1",color:"rgb(55 65 81 / var(--tw-text-opacity))"}),A=o.Z.span({position:"absolute",top:"1.5rem",borderTopRightRadius:"0.5rem",borderBottomRightRadius:"0.5rem","--tw-bg-opacity":"1",backgroundColor:"rgb(234 179 8 / var(--tw-bg-opacity))",paddingLeft:"1.25rem",paddingRight:"1.25rem",paddingTop:"0.25rem",paddingBottom:"0.25rem",fontSize:"1.6rem",fontWeight:"700","--tw-text-opacity":"1",color:"rgb(255 255 255 / var(--tw-text-opacity))","@media (min-width: 1280px)":{top:"1.75rem",paddingTop:"0.5rem",paddingBottom:"0.5rem"}})},66725:function(t,e,r){r.d(e,{Z:function(){return c}});var n=r(29439),i=r(43681),o=r(47313),a=r(52474),u=r(21860),s=r(46417);function c(t){var e=t.imageID,r=t.props,i=(0,o.useRef)(),c=(0,o.useState)(0),d=(0,n.Z)(c,2),h=d[0],b=d[1],f=(0,o.useState)(1),m=(0,n.Z)(f,2),g=m[0],y=m[1],v=(0,a.vS)(e),x=(0,a.dc)(e),w=(0,a.c5)(e);return(0,s.jsxs)(p,{children:[(0,s.jsx)(l,{ref:i,"data-testid":"book-img"}),(0,s.jsx)("img",{className:"hidden",src:v,alt:e,onLoad:function(t){var e=i.current,r=e.getContext("2d"),n=t.target;e.width=n.naturalWidth,e.height=n.naturalHeight,r.drawImage(n,0,0,e.width,e.height),b(n.naturalWidth),y(n.naturalWidth/n.naturalHeight)}}),h>0&&(null===r||void 0===r?void 0:r.map((function(t){return(0,s.jsx)(u.Z,{id:t.image,bgWidth:h,bgRatio:g,horizon:x,minSize:w,x:t.x,y:t.y,dropZoneRef:i,isDraggable:!1},"".concat(t.image," - x:").concat(t.x," y:").concat(t.y))})))]})}var p=i.Z.div({position:"relative",overflow:"hidden"}),l=i.Z.canvas({height:"100%",width:"100%",objectFit:"contain"})},4496:function(t,e,r){r.d(e,{Z:function(){return S}});var n=r(74165),i=r(15861),o=r(29439),a=r(43681),u=r(47313),s=r(2135),c=r(18492),p=r(99701),l=r(96091),d=r(75178),h=r(45952),b=r(87474),f=r(46959),m=r(41387),g=r(12755),y=r(2727),v=r(52474),x=r(69293),w=r(43370),Z=r(9366),k=r(70829),j=r(46417);function S(){var t,e=(0,s.useSearchParams)(),r=(0,o.Z)(e,1)[0].get("acellusID"),a=r?parseInt(r):void 0,l=(0,u.useContext)(y.ZP),f=l.currentBook,S=l.dispatch,P=(0,x.Z)(),I=(0,u.useState)(!1),D=(0,o.Z)(I,2),F=D[0],N=D[1],B=(0,u.useState)(!1),E=(0,o.Z)(B,2),W=E[0],z=E[1],O=(0,u.useState)(!1),H=(0,o.Z)(O,2),M=H[0],Q=H[1],V=(0,u.useState)(!1),q=(0,o.Z)(V,2),J=q[0],G=q[1];function K(t){t.pageNumber?S({type:m.Rx,payload:t.pageNumber}):S({type:m.Rx,payload:0})}function U(t){return X.apply(this,arguments)}function X(){return X=(0,i.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:toast.confirm("Are you sure you want to delete this page?",function(){var t=(0,i.Z)((0,n.Z)().mark((function t(r){var i;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,!(f.publishStatus>0)){t.next=6;break}return t.next=6,c.Z.parentTeacherReject(f.id,a);case 6:return t.next=8,c.Z.deleteBookPage(f.id,e,a);case 8:i=f.pages.filter((function(t){return t.pageNumber!==e})),S({type:m.g1,payload:{pages:i,publishStatus:0}}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),toast.error(t.t0.message||"An unknown error has occurred");case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)}))),X.apply(this,arguments)}function Y(){return $.apply(this,arguments)}function $(){return($=(0,i.Z)((0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return N(!0),z(!0),t.prev=2,t.next=5,c.Z.publishBook(f.id,a);case 5:t.next=13;break;case 7:return t.prev=7,t.t0=t.catch(2),toast.error(t.t0.message||"An unknown error has occurred"),N(!1),z(!1),t.abrupt("return");case 13:return t.prev=13,t.next=16,p.Z.postPublishedBook(f.id);case 16:t.next=20;break;case 18:t.prev=18,t.t1=t.catch(13);case 20:N(!1),setTimeout((function(){z(!1),S({type:m.g1,payload:{publishStatus:1}})}),1500);case 22:case"end":return t.stop()}}),t,null,[[2,7],[13,18]])})))).apply(this,arguments)}function _(){return _=(0,i.Z)((0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!F&&!M){t.next=2;break}return t.abrupt("return");case 2:toast.confirm("Are you sure you would like to submit this book for publication in the Acellus Library?",function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return N(!0),t.prev=3,t.next=6,c.Z.publishBook(f.id,a);case 6:z(!0),t.next=15;break;case 9:return t.prev=9,t.t0=t.catch(3),toast.error(t.t0.message||"An unknown error has occurred"),N(!1),z(!1),t.abrupt("return");case 15:setTimeout((function(){S({type:m.g1,payload:{publishStatus:2}}),N(!1)}),1500);case 16:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)}))),_.apply(this,arguments)}function tt(){return tt=(0,i.Z)((0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!F&&!M){t.next=2;break}return t.abrupt("return");case 2:toast.confirm("Are you sure you would like to reject this book?",function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return Q(!0),t.prev=3,t.next=6,c.Z.parentTeacherReject(f.id,a);case 6:t.next=14;break;case 8:return t.prev=8,t.t0=t.catch(3),toast.error(t.t0.message||"An unknown error has occurred"),Q(!1),G(!1),t.abrupt("return");case 14:setTimeout((function(){S({type:m.g1,payload:{publishStatus:6}}),Q(!1)}),1500);case 15:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)}))),tt.apply(this,arguments)}var et=(0,u.useRef)(),rt=(0,u.useState)(!1),nt=(0,o.Z)(rt,2),it=nt[0],ot=nt[1],at=function(){var t=(0,i.Z)((0,n.Z)().mark((function t(){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e={2:"Are you sure you would like to edit this book? This would require you to approve this book again.",3:"Are you sure you would like to edit this book? This would require the book to undergo another review.",4:"Are you sure you would like to edit this book? This would require you to approve this book again.",5:"This book has been published to the Acellus Library. Editing will remove it from the library and require the book to undergo another review. Are you sure you would like to continue?"},toast.confirm(e[f.publishStatus],function(){var t=(0,i.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return ot(!0),t.prev=3,t.next=6,c.Z.unpublish(f.id,a);case 6:t.next=12;break;case 8:t.prev=8,t.t0=t.catch(3),toast.error(t.t0.message||"An unknown error has occurred"),ot(!1);case 12:setTimeout((function(){S({type:m.g1,payload:{publishStatus:1}}),ot(!1)}),1500);case 13:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,j.jsxs)(A,{children:[(0,j.jsx)(h.Z,{targetRef:et,containerRef:et,children:(0,j.jsx)(h.k,{children:"This is your book's cover"})}),a&&(0,j.jsx)(C,{acellusID:a,currentBook:f,parentApproveBook:function(){return _.apply(this,arguments)},publish:Y,schoolLevel:P,isSubmitting:F,submitted:W,parentRejectBook:function(){return tt.apply(this,arguments)},isParentRejecting:M,isLoadingEditStatus:it,didParentReject:J,handleEditClick:at}),(0,j.jsxs)(b.r,{perRow:"H"===P&&4,children:[null===(t=f.pages)||void 0===t?void 0:t.map((function(t){var e;t.background?e=t.background:e=(0,v.VL)(P,f.theme)[0].title;return(0,j.jsxs)("div",{children:[!t.pageNumber&&(0,j.jsx)(R,{ref:et,src:w.CoverRibbon,schoolLevel:P,alt:"A ribbon indicating book cover"}),(0,j.jsx)(Z.Z,{onClick:function(){return function(t){K(t),a&&1!==f.publishStatus?S({type:m.QF,payload:y.AN}):(S({type:m.Hh,payload:t.pageNumber||0}),S({type:m.QF,payload:y.cE}))}(t)},imageID:e,props:t.props,text:t.text,deleteFunc:(a?1===f.publishStatus&&t.pageNumber:t.pageNumber&&f.publishStatus<1)?(0,i.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(t.pageNumber);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))):void 0,isPage:t.pageNumber>0,isParent:!!a})]},t.pageNumber?t.pageNumber:0)})),(0,j.jsx)(g.Z,{onClick:function(){var t=f.pages[f.pages.length-1].pageNumber;t||(t=0),K({pageNumber:t+1}),S({type:m.Hh,payload:void 0}),S({type:m.QF,payload:y.tR})},customStyles:[{transitionProperty:"opacity",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"150ms"},a&&{"--tw-border-opacity":"1 !important",borderColor:"rgb(209 213 219 / var(--tw-border-opacity)) !important",backgroundColor:"rgb(255 255 255 / 0.3)",backgroundClip:"padding-box"},a&&1===f.publishStatus?{opacity:"1"}:{opacity:"0"},!a&&{opacity:"1"}]})]}),!a&&(0,j.jsx)(j.Fragment,{children:f.publishStatus>0?(0,j.jsx)("h5",{className:"text-white",children:"Published"}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(k.J,{color:"yellow",colorNum:500,buttonType:{E:"text",M:"square"}[P],size:{M:{width:"fit-content"},H:{width:"12rem"}}[P],onClick:F||W?function(){}:Y,schoolLevel:P,children:F?(0,j.jsx)(d.Z,{customStyles:{height:"4rem",stroke:"#fff"}}):W?(0,j.jsx)(T,{}):(0,j.jsx)(L,{children:"Publish"})}),f.publishedID&&(0,j.jsx)("h4",{children:"This book has been published, but you've edited it since. Click publish again to upload changes."})]})})]})}var C=function(t){var e=t.acellusID,r=t.currentBook,n=t.parentApproveBook,i=(t.publish,t.schoolLevel,t.isSubmitting),o=(t.submitted,t.parentRejectBook),a=t.isParentRejecting,u=t.handleEditClick,s=t.isLoadingEditStatus;if(e){if(0===r.publishStatus||void 0===r.publishStatus)return(0,j.jsx)(P,{children:"This book is currently being edited by the student"});var c=r.publishStatus>1&&6!==r.publishStatus;return(0,j.jsxs)("div",{className:"flex gap-6 justify-between",children:[(0,j.jsx)(f.Z,{color:"teacherBlue",colorNum:500,onClick:n,ariaLabel:"Approve",width:{width:"9rem"},disabled:r.publishStatus>1,customStyles:[{height:"4rem",opacity:"1",transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"150ms"},6===r.publishStatus&&{pointerEvents:"none",opacity:"0"}],children:i?(0,j.jsx)(d.Z,{customStyles:{height:"2rem",stroke:"#fff"}}):(1===r.publishStatus?{approveText:"Approve",rejectText:"Reject"}:6===r.publishStatus?{approveText:"Approve",rejectText:"Rejected"}:{approveText:"Approved",rejectText:"Reject"}).approveText}),(0,j.jsx)(f.Z,{onClick:c?u:o,ariaLabel:c?"Edit":"Reject",color:"teacherOrange",colorNum:500,width:{width:"9rem"},disabled:6===r.publishStatus,customStyles:[{height:"4rem",outlineColor:"#EFA039",transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"150ms",":focus":{outlineColor:"#EFA039"},":active":{outlineColor:"#EFA039"},":focus-visible":{outlineColor:"#EFA039"}}],children:a||s?(0,j.jsx)(d.Z,{customStyles:{height:"2rem",stroke:"#fff"}}):c?"Edit":6===r.publishStatus?"Rejected":"Reject"})]})}},A=a.Z.div({display:"flex",flexDirection:"column",alignItems:"center",gap:"var(--spacing)",paddingBottom:"5rem"}),R=a.Z.img((function(t){return[{position:"absolute",top:"-1rem",zIndex:"60",marginLeft:"2rem",cursor:"default",transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"200ms","@media (min-width: 1536px)":{top:"-1.5rem",marginLeft:"3rem",height:"9rem"}},"E"===t.schoolLevel?{height:"6rem","@media (min-width: 640px)":{height:"8rem"},"@media (min-width: 768px)":{height:"6rem"}}:{height:"4rem","@media (min-width: 1024px)":{height:"5rem"}}]})),T=(a.Z.div({marginTop:"3rem",marginBottom:"3rem",display:"flex",justifyContent:"space-around"}),(0,a.Z)(l.r)({height:"4rem",width:"4rem"})),L=(a.Z.h5({"--tw-text-opacity":"1",color:"rgb(255 255 255 / var(--tw-text-opacity))"}),a.Z.span({fontSize:"2rem",color:"inherit",fontWeight:"600"})),P=a.Z.h5({height:"fit-content",overflowWrap:"break-word",paddingLeft:"1rem",paddingRight:"1rem",textAlign:"center","@media (min-width: 768px)":{height:"4rem"}})},3874:function(t,e,r){r.d(e,{Z:function(){return p}});var n=r(47313),i=r(87474),o=r(2727),a=r(41387),u=r(52474),s=r(69293),c=r(46417);function p(){var t=(0,s.Z)(),e=(0,u.RC)(t),r=(0,n.useContext)(o.ZP).dispatch;return(0,c.jsx)(i.r,{perRow:"H"===t&&4,children:null===e||void 0===e?void 0:e.map((function(t){return(0,c.jsx)(i.V,{onClick:function(){return function(t){r({type:a.Vr,payload:{}}),r({type:a.Hh,payload:void 0}),r({type:a.Wt,payload:t}),r({type:a.Rx,payload:0}),r({type:a.QF,payload:o.tR})}(t)},image:t.icon,title:t.title},t.title)}))})}},53086:function(t,e,r){r.d(e,{Z:function(){return j}});var n=r(1413),i=r(74165),o=r(15861),a=r(29439),u=r(47313),s=r(2135),c=r(18492),p=r(87474),l=r(41387),d=r(52474),h=r(69293),b=r(2727),f=r(12755),m=r(9366),g=r(58251),y=r(43681),v=r(46417);function x(){return(0,v.jsx)(w,{children:(0,v.jsx)(Z,{children:"Loading..."})})}var w=y.Z.div({position:"fixed",inset:"0px",zIndex:"50",display:"flex",height:"var(--unit100vh)",width:"100vw",alignItems:"center",justifyContent:"center",gap:"0.5rem","--tw-bg-opacity":"0.8",backgroundColor:"rgb(31 41 55 / var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgb(255 255 255 / var(--tw-text-opacity))"}),Z=y.Z.span({fontSize:"2rem",letterSpacing:"0.025em"});function k(t){var e=t.acellusID,r=(0,u.useContext)(b.ZP),i=r.called,o=r.dispatch,a=r.error,s=r.loading;return(0,u.useEffect)((function(){o({type:l.cS,next:l.uA}),c.Z.getPersonalLibraryData(e).then((function(t){t.items?o({type:l.uA,payload:{private:t}}):o({type:l.hD})}))}),[o,e]),a.action&&a.action===l.uA?(0,v.jsx)(g.Z,(0,n.Z)({},a)):s&&i===l.uA?(0,v.jsx)(x,{}):void 0}function j(){var t,e,r,g=(0,s.useSearchParams)(),y=(0,a.Z)(g,1)[0].get("acellusID"),x=y?parseInt(y):void 0,w=(0,u.useContext)(b.ZP),Z=w.libraryData,j=w.dispatch,S=(0,h.Z)(),C=null===Z||void 0===Z||null===(t=Z.private)||void 0===t?void 0:t.items;function A(t){return R.apply(this,arguments)}function R(){return R=(0,o.Z)((0,i.Z)().mark((function t(e){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:toast.confirm('Are you sure you want to delete "'.concat(e.title,'"?').concat(x?" This action is irreversible.":""),function(){var t=(0,o.Z)((0,i.Z)().mark((function t(r){var o,a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,c.Z.deleteBook(e.id,x);case 4:o=Z.private.items.filter((function(t){return t.id!==e.id})),(a=(0,n.Z)({},Z)).private.items=o,j({type:l.uA,payload:a});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)}))),R.apply(this,arguments)}function T(t){return L.apply(this,arguments)}function L(){return(L=(0,o.Z)((0,i.Z)().mark((function t(e){var r,o;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.Z.getLibraryBook(e.id,x);case 2:r=t.sent,j({type:l.Vr,payload:(0,n.Z)((0,n.Z)({},e),r)}),o=(0,d.gh)(S,r.theme),j({type:l.Wt,payload:o}),j({type:l.QF,payload:b.bn});case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}x&&(C=null===(r=C)||void 0===r?void 0:r.filter((function(t){var e=t.publishStatus;return 6!==e&&0!==e&&void 0!==e})).sort((function(t,e){return t.publishStatus===e.publishStatus?0:t.publishStatus>e.publishStatus?1:-1})));return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(k,{acellusID:x}),(0,v.jsx)("div",{className:"pb-20",children:(0,v.jsxs)(p.r,{perRow:"H"===S?5:4,children:[!x&&(0,v.jsx)(f.Z,{onClick:function(){j({type:l.Vr,payload:{}}),j({type:l.QF,payload:b.hZ})}}),null===(e=C)||void 0===e?void 0:e.map((function(t){var e;t.background?e=t.background:e=(0,d.VL)(S,t.theme)[0].title;return(0,v.jsx)(m.Z,{onClick:(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),imageID:e,text:t.title,props:t.props,deleteFunc:x&&1!==t.publishStatus?void 0:(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),isPage:!0,status:t.publishStatus,published:t.publishedID,acellusID:x},t.id)}))]})})]})}}}]);