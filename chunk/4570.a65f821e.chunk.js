"use strict";(self.webpackChunkacellus=self.webpackChunkacellus||[]).push([[4570],{36693:function(t,e,r){r.d(e,{r:function(){return l}});var n,i=r(47313),o=["title","titleId"];function a(){return a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},a.apply(this,arguments)}function c(t,e){if(null==t)return{};var r,n,i=function(t,e){if(null==t)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function d(t,e){var r=t.title,d=t.titleId,l=c(t,o);return i.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",ref:e,"aria-labelledby":d},l),r?i.createElement("title",{id:d},r):null,n||(n=i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"})))}var l=i.forwardRef(d);r.p},4243:function(t,e,r){r.d(e,{RM:function(){return p},SC:function(){return f},U8:function(){return u},bi:function(){return g},iA:function(){return l},pj:function(){return h},xD:function(){return s},y6:function(){return d}});var n,i,o=r(30168),a=r(30686),c=r(43681),d=c.Z.div((function(t){var e=t.stickyPosition,r=t.customStyles,i=t.printMode;return[{position:"relative",height:"100%",width:"100%",overflow:"auto",borderRadius:"0.75rem",borderWidth:"1px","--tw-border-opacity":"1",borderColor:"rgb(229 231 235 / var(--tw-border-opacity))"},e&&!i?[{maxHeight:"70dvh","@media (min-width: 1280px)":{maxHeight:"fit-content",overflow:"visible"}},(0,a.iv)(n||(n=(0,o.Z)(["\n          thead {\n            // if stickyPosition is passed in, apply the stickyPosition that was passed in, and make the thead sticky\n            ","\n            ","\n          }\n        "])),{position:"sticky",top:"0px",zIndex:"10"},e)]:{overflowX:"auto"},r]})),l=c.Z.table((function(t){return[{width:"100%",borderCollapse:"separate","--tw-border-spacing-x":"0px","--tw-border-spacing-y":"0px",borderSpacing:"var(--tw-border-spacing-x) var(--tw-border-spacing-y)",borderRadius:"0.75rem","--tw-bg-opacity":"1",backgroundColor:"rgb(223 232 249 / var(--tw-bg-opacity))",transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"200ms"},t.yDividers&&{"& tbody > tr:last-of-type > td":{borderWidth:"0px"},"& tbody > tr > td":{borderBottomWidth:"1px","--tw-border-opacity":"1",borderColor:"rgb(229 231 235 / var(--tw-border-opacity))"}}]})),s=c.Z.thead({width:"100%",borderTopLeftRadius:"0.75rem",borderTopRightRadius:"0.75rem","& th:first-of-type":{borderTopLeftRadius:"0.75rem"},"& th:last-of-type":{borderTopRightRadius:"0.75rem"}}),u=c.Z.tr({borderTopLeftRadius:"0.75rem",borderTopRightRadius:"0.75rem","--tw-bg-opacity":"1",backgroundColor:"rgb(255 255 255 / var(--tw-bg-opacity))","> th:first-of-type":{paddingLeft:"1.25rem"},"> th:last-of-type":{paddingRight:"1.25rem"},"@media (min-width: 640px)":{"> th:first-of-type":{paddingLeft:"1.75rem"},"> th:last-of-type":{paddingRight:"1.75rem"}},"@media (min-width: 1024px)":{"> th:first-of-type":{paddingLeft:"2.5rem"},"> th:last-of-type":{paddingRight:"2.5rem"}}}),g=c.Z.th((function(t){var e=t.text,r=t.sticky,n=t.leftSticky;return[{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",borderBottomWidth:"2px","--tw-border-opacity":"1",borderColor:"rgb(199 215 245 / var(--tw-border-opacity))",backgroundColor:"rgb(223 232 249 / 0.7)",paddingLeft:"0.75rem",paddingRight:"0.75rem",paddingTop:"1.25rem",paddingBottom:"1.25rem",fontSize:"1.2rem",fontWeight:"800","--tw-text-opacity":"0.5",color:"rgb(17 24 39 / var(--tw-text-opacity))","@media (min-width: 768px)":{padding:"1.5rem",fontSize:"1.4rem"}},(0,a.iv)(i||(i=(0,o.Z)(["\n    @supports (-moz-appearance: none) {\n      ",";\n    }\n  "])),{"--tw-bg-opacity":"1"}),"right"===e?{textAlign:"right"}:"left"===e?{textAlign:"left"}:{textAlign:"center"},r&&{position:"sticky",top:"0px",zIndex:"10",backgroundImage:"linear-gradient(to top, var(--tw-gradient-stops))","--tw-gradient-from":"rgb(223 232 249 / 0.7) var(--tw-gradient-from-position)","--tw-gradient-to":"#DFE8F9 var(--tw-gradient-to-position)","--tw-gradient-stops":"var(--tw-gradient-from), var(--tw-gradient-to)"},n&&{"@media (min-width: 768px)":{position:"sticky",left:"0px",zIndex:"10",backgroundImage:"linear-gradient(to left, var(--tw-gradient-stops))","--tw-gradient-from":"rgb(223 232 249 / 0.7) var(--tw-gradient-from-position)","--tw-gradient-to":"#DFE8F9 var(--tw-gradient-to-position)","--tw-gradient-stops":"var(--tw-gradient-from), var(--tw-gradient-to)"}}]})),p=c.Z.tbody({width:"100%","--tw-bg-opacity":"1",backgroundColor:"rgb(255 255 255 / var(--tw-bg-opacity))"}),f=c.Z.tr((function(t){return[t.clickable&&{cursor:"pointer","--tw-bg-opacity":"1",backgroundColor:"rgb(255 255 255 / var(--tw-bg-opacity))",":hover":{"--tw-bg-opacity":"1",backgroundColor:"rgb(249 250 251 / var(--tw-bg-opacity))"}},{transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"300ms","> td:first-of-type":{paddingLeft:"1.25rem"},"> td:last-of-type":{paddingRight:"1.25rem"},"@media (min-width: 640px)":{"> td:first-of-type":{paddingLeft:"1.75rem"},"> td:last-of-type":{paddingRight:"1.75rem"}},"@media (min-width: 1024px)":{"> td:first-of-type":{paddingLeft:"2.5rem"},"> td:last-of-type":{paddingRight:"2.5rem"}}}]})),h=c.Z.td((function(t){var e=t.text;return[{whiteSpace:"nowrap",padding:"1.25rem","@media (min-width: 768px)":{padding:"1.5rem"}},"right"===e?{textAlign:"right"}:"left"===e?{textAlign:"left"}:{textAlign:"center"}]}))},44583:function(t,e,r){r.d(e,{Z:function(){return c}});var n=r(29439),i=r(47313),o=r(58229),a=r(30424);function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,d=(0,i.useState)(!1),l=(0,n.Z)(d,2),s=l[0],u=l[1],g=(0,a.Z)().height;return(0,i.useEffect)((function(){if(null!==c&&void 0!==c&&c.current||r){var n=(null===c||void 0===c?void 0:c.current)||(r?document.getElementById(r):document.documentElement);if(!n)return logger.log("useScrolledToBottom: element not found"),u(!1);return(0,o.Oo)("scroll",(function(){n.scrollTop+n.clientHeight>=n.scrollHeight-e&&(null===t||void 0===t||t())}),void 0,(null===c||void 0===c?void 0:c.current)||(r?n:void 0))}}),[t,g,r,e,c]),s}},54570:function(t,e,r){r.r(e);var n,i=r(30168),o=r(29439),a=r(30686),c=r(43681),d=r(47313),l=r(12264),s=r(96091),u=r(36693),g=r(35667),p=r(72159),f=r(79250),h=r(44583),m=r(43370),b=r(27673),w=r(11360),x=r(58229),v=r(46959),y=r(4243),j=r(46417);e.default=function(){var t=(0,d.useState)("Current Month"),e=(0,o.Z)(t,2),r=e[0],n=e[1],i=(0,d.useState)(!1),a=(0,o.Z)(i,2),c=a[0],s=a[1],u=(0,d.useState)(0),m=(0,o.Z)(u,2),b=m[0],F=m[1],P=(0,d.useState)([]),B=(0,o.Z)(P,2),W=B[0],U=B[1],H=(0,d.useState)(""),Y=(0,o.Z)(H,2),V=Y[0],G=Y[1],K=(0,d.useState)({}),X=(0,o.Z)(K,2),$=X[0],q=X[1],J=(0,d.useRef)(!1),Q=(0,d.useRef)(null),_=(0,d.useState)(!1),tt=(0,o.Z)(_,2),et=tt[0],rt=tt[1],nt=(0,d.useState)(!1),it=(0,o.Z)(nt,2),ot=it[0],at=it[1];(0,d.useEffect)((function(){var t=(0,w.FK)(),e=(0,o.Z)(t,2),r=e[0],n=e[1];l.Z.getLicenseReport("array",r,n).then((function(t){U(t.licenses||[]),q(function(t){for(var e={},r=new Date(t),n=r.getFullYear(),i=r.getMonth(),o=new Date,a=o.getFullYear(),c=o.getMonth(),d=a;d>=n;d--){var l=void 0;if(d===a||d===a-1)for(var s=d===a?c:11;s>(d===a?-1:5)&&!(d===n&&s<i);s--)e[l=s===c&&d===a?"Current Month":"".concat((0,w.Nf)(s)," ").concat(d)]={filename:"".concat((0,w.Nf)(s),"-").concat(d),beginDate:"".concat(d,"-").concat((0,x.AV)(s+1),"-01"),endDate:new Date(d,s+1,0)};if(d===n&&i>5)break;d<a&&(e[l="".concat(d-1," - ").concat(d)]={filename:l,beginDate:"".concat(d-1,"-07-01"),endDate:"".concat(d,"-06-30")})}return e}(t.firstLicenseDate))})).catch((function(){return toast.error("Unable to load licenses. Please try again.")}))}),[]),(0,d.useEffect)((function(){if($[r]){s(!0);var t=$[r];l.Z.getLicenseReport("count",t.beginDate,t.endDate).then((function(e){F(e.studentCount),l.Z.getLicenseReport("array",t.beginDate,t.endDate,{limit:e.studentCount>500?500:e.studentCount}).then((function(t){U(t.licenses||[]),G(t.page||"")})).catch((function(){return toast.error("Unable to reach server. Check your connection and try again.")}))})).catch((function(){return toast.error("Unable to reach server. Check your connection and try again.")})).finally((function(){return s(!1)}))}}),[r,$]);var ct=(0,d.useCallback)((function(){if(!(W.length>=b)&&$[r]&&!J.current&&V){var t=$[r];J.current=!0,l.Z.getLicenseReport("array",t.beginDate,t.endDate,{limit:500,page:V}).then((function(t){U((function(e){return e.slice().concat(t.licenses)||[]})),G(t.page||"")})).finally((function(){return J.current=!1}))}}),[$,W.length,V,r,b]);(0,h.Z)(ct,5,null,Q);return(0,j.jsxs)(k,{"data-testid":"main-wrapper",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("h2",{children:"License Usage Report"}),(0,j.jsx)("p",{children:"Select a date range to view which students have activated licenses."})]}),(0,j.jsxs)(R,{children:[(0,j.jsx)(S,{children:(0,j.jsx)(p.c,{value:r,onChange:n,labelText:"Date Range",children:(0,j.jsx)(p.PN,{children:Object.keys($).map((function(t){return(0,j.jsx)(p.$m,{"data-testid":"select-option",isSelected:t===r,value:t,children:(0,j.jsxs)(D,{children:[t," ",(0,j.jsx)(C,{className:"checkmark"})]})},t)}))})})}),(0,j.jsxs)(L,{children:[(0,j.jsx)(z,{children:(0,j.jsx)(A,{})}),(0,j.jsxs)(I,{children:["Student License Usage",(0,j.jsx)(O,{"data-testid":"license-count",children:b})]})]})]}),(0,j.jsx)(y.y6,{ref:Q,customStyles:{height:"50rem",overflow:"auto"},children:(0,j.jsxs)(y.iA,{children:[(0,j.jsx)(y.xD,{children:(0,j.jsxs)(y.U8,{children:[(0,j.jsx)(E,{sticky:!0,children:"Name"}),(0,j.jsx)(E,{sticky:!0,children:"Acellus ID"}),(0,j.jsx)(E,{sticky:!0,children:"Action Date"})]})}),(0,j.jsx)(y.RM,{children:c?(0,j.jsx)(y.SC,{children:(0,j.jsx)(T,{colSpan:"3",children:(0,j.jsx)(f.Z,{})})}):W.length?W.map((function(t,e){return(0,j.jsx)(M,{"data-testid":"tablerow",children:(0,j.jsx)(Z,{rowData:t})},"".concat(t.acellusID,"-").concat(e))})):(0,j.jsx)(y.SC,{children:(0,j.jsx)("td",{colSpan:"3",children:(0,j.jsx)(g.Z,{title:"No License Reports for this Date Range",subtext:"Select a Valid Date Range"})})})})]})}),(0,j.jsx)(N,{children:(0,j.jsx)(v.Z,{color:"teacherBlue",colorNum:500,onClick:function(){if(rt(!0),at(!1),!W.length)return at(!0),rt(!1),void toast.error("There are no licenses to download in this date range");var t=$[r];console.log("Downloading Report"),l.Z.getLicenseReport("file",t.beginDate,t.endDate,{limit:b}).then((function(e){var r="license-report-".concat(t.filename,".csv");(0,x.Sv)(e,r)})).catch((function(){at(!0),rt(!1),toast.error("There was an error downloading the report")})).finally((function(){return rt(!1)}))},isSubmitting:et,error:ot,children:"Export Report"})})]})};var Z=function(t){var e=t.rowData,r=e.name,n=e.acellusID,i=e.date;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(P,{children:r}),(0,j.jsx)(F,{children:(0,j.jsx)("p",{children:(0,b.uh)(n)})}),(0,j.jsx)(F,{children:(0,j.jsx)("p",{children:function(t){return"".concat((0,w.Nf)(t.getMonth())," ").concat(t.getFullYear())}(new Date(i))})})]})};var k=c.Z.div({display:"flex",flexDirection:"column",gap:"2rem"}),D=c.Z.div({display:"flex",flexDirection:"row",justifyContent:"space-between",gap:"2rem",fontSize:"1.6rem"}),R=c.Z.div({display:"flex",width:"100%",flexDirection:"column",alignItems:"flex-end",justifyContent:"space-between",gap:"1rem","@media (min-width: 1024px)":{flexDirection:"row"}}),S=c.Z.div({width:"100%","@media (min-width: 1024px)":{width:"25%"}}),C=(0,c.Z)(s.r)({height:"2rem",width:"2rem"}),L=c.Z.div((function(){return[{display:"flex",width:"100%",alignItems:"center",borderRadius:"0.75rem",backgroundSize:"cover",padding:"1rem","--tw-text-opacity":"1",color:"rgb(255 255 255 / var(--tw-text-opacity))","@media (min-width: 1024px)":{width:"auto",padding:"1.5rem"}},(0,a.iv)(n||(n=(0,i.Z)(["\n    background-image: url(",");\n  "])),m.TeacherBG)]})),z=c.Z.div({display:"flex",height:"6rem",width:"6rem",alignItems:"center",justifyContent:"center",borderRadius:"0.5rem","--tw-bg-opacity":"1",backgroundColor:"rgb(162 187 236 / var(--tw-bg-opacity))"}),A=(0,c.Z)(u.r)({height:"4rem",width:"4rem"}),I=c.Z.span({marginLeft:"1.5rem",display:"flex",flexDirection:"column",fontSize:"2rem","--tw-text-opacity":"1",color:"rgb(255 255 255 / var(--tw-text-opacity))"}),O=c.Z.span({fontSize:"3rem",fontWeight:"600"}),T=(0,c.Z)(y.pj)({textAlign:"center"}),E=(0,c.Z)(y.bi)({textAlign:"left"}),M=(0,c.Z)(y.SC)({":nth-child(even)":{"--tw-bg-opacity":"1",backgroundColor:"rgb(249 250 251 / var(--tw-bg-opacity))"}}),F=(0,c.Z)(y.pj)({textAlign:"left"}),P=(0,c.Z)(F)({fontSize:"1.6rem",fontWeight:"600","--tw-text-opacity":"1",color:"rgb(55 65 81 / var(--tw-text-opacity))"}),N=c.Z.div({display:"flex",justifyContent:"flex-end"})}}]);