"use strict";(self.webpackChunkacellus=self.webpackChunkacellus||[]).push([[3768],{15668:function(e,t,r){r.d(t,{r:function(){return u}});var n,i,a=r(47313),o=["title","titleId"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}function l(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function d(e,t){var r=e.title,d=e.titleId,u=l(e,o);return a.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",ref:t,"aria-labelledby":d},u),r?a.createElement("title",{id:d},r):null,n||(n=a.createElement("path",{fillRule:"evenodd",d:"M8.25 6.75a3.75 3.75 0 117.5 0 3.75 3.75 0 01-7.5 0zM15.75 9.75a3 3 0 116 0 3 3 0 01-6 0zM2.25 9.75a3 3 0 116 0 3 3 0 01-6 0zM6.31 15.117A6.745 6.745 0 0112 12a6.745 6.745 0 016.709 7.498.75.75 0 01-.372.568A12.696 12.696 0 0112 21.75c-2.305 0-4.47-.612-6.337-1.684a.75.75 0 01-.372-.568 6.787 6.787 0 011.019-4.38z",clipRule:"evenodd"})),i||(i=a.createElement("path",{d:"M5.082 14.254a8.287 8.287 0 00-1.308 5.135 9.687 9.687 0 01-1.764-.44l-.115-.04a.563.563 0 01-.373-.487l-.01-.121a3.75 3.75 0 013.57-4.047zM20.226 19.389a8.287 8.287 0 00-1.308-5.135 3.75 3.75 0 013.57 4.047l-.01.121a.563.563 0 01-.373.486l-.115.04c-.567.2-1.156.349-1.764.441z"})))}var u=a.forwardRef(d);r.p},53768:function(e,t,r){r.r(t),r.d(t,{default:function(){return S}});var n=r(1413),i=r(29439),a=r(43681),o=r(47313),s=r(2135),l=r(7752),d=r(31222),u=r(15668),c=r(83484),m=r(35667),p=r(79250),h=r(51083),f=r(46959),v=r(13797),w=r(76956),g=r(31278),x=r(20360),b=r(81517),y=r(29079),k=r(57830),j=r(11360),C=r(46417),Z=12;function S(){var e=(0,o.useState)(Z),t=(0,i.Z)(e,2),r=t[0],n=t[1],a=(0,o.useState)(null),s=(0,i.Z)(a,2),l=s[0],d=s[1];(0,o.useEffect)((function(){return n(Z)}),[l]);var u=null!==l&&void 0!==l&&l.value?Number(l.value):void 0;return(0,C.jsx)(x.ZP,{limit:r,displayCourseID:u,children:(0,C.jsx)(I,{limit:r,setLimit:n,displayCourseID:u,filter:l,setFilter:d})})}function I(e){var t,r=e.updateTooltip,a=e.openVideo,d=e.limit,c=e.setLimit,h=e.setFilter,S=e.displayCourseID,I=(0,x.G5)(),Y=I.refresh,H=I.refreshing,X=(0,b.Av)().teacher,q=(0,w.h)().enrollment,G=(0,o.useMemo)((function(){var e,t;return null!==(e=null===(t=q.courses)||void 0===t?void 0:t.map((function(e){return{name:e.courseName,value:e.displayCourseID}})))&&void 0!==e?e:[]}),[q.courses]),Q=(0,o.useState)(""),U=(0,i.Z)(Q,2),W=U[0],J=U[1],K=(0,o.useState)(!1),$=(0,i.Z)(K,2),_=$[0],ee=$[1],te=(0,o.useState)(!1),re=(0,i.Z)(te,2),ne=re[0],ie=re[1],ae=(0,o.useState)(G),oe=(0,i.Z)(ae,2),se=oe[0],le=oe[1],de=(0,o.useState)(0),ue=(0,i.Z)(de,2),ce=ue[0],me=ue[1],pe=(0,y.ZP)(),he=pe.socket,fe=pe.events,ve=(0,o.useMemo)((function(){var e;return null===(e=q.courses)||void 0===e?void 0:e.map((function(e){return e.displayCourseID}))}),[q.courses]);(0,o.useEffect)((function(){if(he&&fe){var e=function(e){return e.sc!==X.schoolID||S&&e.classId!==S||ve&&0!==ve.length&&!ve.includes(e.classId)};return he.emit("active students",{sc:X.schoolID},(function(e){var t;if(e){var r=e.total,n=e.classes;if(!S)return me(r);me(Object.entries(null!==(t=n[S])&&void 0!==t?t:{}).length)}})),Array.prototype.forEach.bind([fe.on("arriving",(function(t){e(t)||me((function(e){return e+1}))})),fe.on("leaving",(function(t){e(t)||me((function(e){return e-1}))}))],(function(e){return e()}))}}),[ve,S,fe,he,X.schoolID]);var we=(0,o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";ie(!0);var t=function(e){le(e),ie(!1)};return X.adminLevel>=2&&(0===G.length||""!==e)?l.Z.get({search:e,inUse:!0}).then((function(e){return t(e.courses.map((function(e){return{name:e.courseName,value:e.displayCourseID}})))})).catch((function(e){toast.error("Failed to execute search.\n".concat(e.message)),t([])})):t(""===e?G:G.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())})))}),[G,X.adminLevel]),ge=(0,o.useCallback)((function(e){h(e)}),[h]),xe=(0,s.useSearchParams)(),be=(0,i.Z)(xe,1)[0].get("modal");(0,o.useEffect)((function(){if(!be){var e=Y(),t=setInterval((function(){return e=Y()}),5*j.x7);return function(){clearInterval(t),e()}}}),[be,Y]);var ye=d>=ce&&d>=(null===(t=I.allStudents)||void 0===t?void 0:t.length);return(0,C.jsx)(O,{children:(0,C.jsxs)(F,{children:[(0,C.jsxs)(T,{children:[(0,C.jsxs)(L,{children:[(0,C.jsxs)(R,{children:[(0,C.jsx)(s.Link,{to:"/teacher/dashboard","aria-label":"Return","data-tooltip":"true",children:(0,C.jsx)(z,{"aria-hidden":"true"})}),(0,C.jsx)(M,{children:"Live Monitor"})]}),(0,C.jsx)(V,{onClick:Y,"aria-label":"Refresh",children:(0,C.jsx)(D,{"aria-hidden":"true",refreshing:H})})]}),(0,C.jsxs)(E,{children:[(0,C.jsxs)(f.Z,{onClick:Y,customStyles:B,"aria-label":"Refresh",children:["Refresh",(0,C.jsx)(D,{"aria-hidden":"true",refreshing:H})]}),(0,C.jsx)(P,{children:(0,C.jsx)(v.ZP,{placeholder:"Filter by Course",onSelection:ge,query:W,setQuery:J,results:se,onSearch:we,format:"nameValue",autocomplete:!0,onFocus:function(){return ee(!0)},onHide:function(){return ee(!1)},loading:ne,showResults:_,setShowResults:ee,z:10,notFoundLabel:0===G.length&&X.adminLevel<2?"You don't manage any courses.":void 0})})]})]}),null!==I&&void 0!==I&&I.students?I.students.length?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(A,{children:null===I||void 0===I?void 0:I.students.map((function(e){return(0,C.jsx)(g.Z,(0,n.Z)((0,n.Z)((0,n.Z)({},I),e),{},{updateTooltip:r,openVideo:a}),e.acellusID)}))}),(0,C.jsx)(f.Z,{onClick:function(){return c((function(e){return e+Z}))},color:"teacherBlue",disabled:ye,colorNum:500,customStyles:N,children:ye?"Showing All Active Students":"Load More"})]}):(0,C.jsx)(m.Z,{title:"No Active Students",subtext:W?"There are currently no students working in ".concat(W,"."):"There are currently no students working in the ".concat((0,k.bh)(G.length,"class",!1)," you are monitoring."),children:(0,C.jsx)(u.r,{"aria-hidden":"true"})}):(0,C.jsx)(p.Z,{})]})})}var D=(0,a.Z)(c.r)((function(e){return[{height:"2rem",width:"2rem",flexShrink:"0","--tw-text-opacity":"1",color:"rgb(30 58 138 / var(--tw-text-opacity))",transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"150ms","@media (min-width: 500px)":{height:"1.5rem",width:"1.5rem",color:"rgb(0 0 0 / 0.9)"}},e.refreshing&&{"@keyframes reverseSpin":{from:{transform:"rotate(360deg);"},to:{transform:"rotate(0deg);"}},animation:"reverseSpin 1s ease-in-out infinite"}]})),O=(0,a.Z)(h.i)({flex:"1 1 0%","--tw-bg-opacity":"1",backgroundColor:"rgb(223 232 249 / var(--tw-bg-opacity))","@media (min-width: 1024px)":{"--tw-bg-opacity":"1",backgroundColor:"rgb(255 255 255 / var(--tw-bg-opacity))",paddingBottom:"var(--spacing)"}}),T=a.Z.div({display:"flex",flexDirection:"column",gap:"1.5rem"}),L=a.Z.div({display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem","@media (min-width: 1024px)":{display:"none"}}),R=a.Z.div({display:"flex",alignItems:"center",gap:"0.5rem"}),F=a.Z.div({position:"relative",display:"flex",minHeight:"100%",flexDirection:"column",gap:"2rem","--tw-bg-opacity":"1",backgroundColor:"rgb(223 232 249 / var(--tw-bg-opacity))",paddingTop:"2rem",paddingBottom:"2rem","@media (min-width: 1024px)":{borderRadius:"1rem",padding:"2rem"}}),M=a.Z.h1({"--tw-text-opacity":"1",color:"rgb(30 58 138 / var(--tw-text-opacity))"}),z=(0,a.Z)(d.r)({height:"1.75rem",width:"1.75rem",borderRadius:"9999px",strokeWidth:"3px","--tw-text-opacity":"1",color:"rgb(30 58 138 / var(--tw-text-opacity))","--tw-backdrop-blur":"blur(8px)",backdropFilter:"var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)",transitionProperty:"transform",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"200ms",":hover":{"--tw-scale-x":"1.05","--tw-scale-y":"1.05",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))"},"@media (min-width: 640px)":{height:"2.5rem",width:"2.5rem"}}),E=a.Z.div({display:"flex",width:"100%",flexDirection:"column",alignItems:"center",justifyContent:"space-between",gap:"1rem","@media (min-width: 500px)":{flexDirection:"row"}}),P=a.Z.div({width:"100%","@media (min-width: 768px)":{width:"40rem"}}),A=a.Z.div({display:"flex",height:"100%",flexDirection:"column",gap:"1rem","@media (min-width: 500px)":{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))"},"@media (min-width: 1024px)":{gridTemplateColumns:"repeat(3, minmax(0, 1fr))"},"@media (min-width: 1280px)":{gridTemplateColumns:"repeat(4, minmax(0, 1fr))"},"@media (min-width: 1750px)":{gridTemplateColumns:"repeat(5, minmax(0, 1fr))"},"@media (min-width: 1950px)":{gridTemplateColumns:"repeat(6, minmax(0, 1fr))"}}),N={marginLeft:"auto",marginRight:"auto",marginBottom:"0px",marginTop:"auto","--tw-shadow":"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)","--tw-shadow-colored":"0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color)",boxShadow:"var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)","@media (min-width: 500px)":{gridColumn:"span 2 / span 2"},"@media (min-width: 1024px)":{gridColumn:"span 3 / span 3"},"@media (min-width: 1280px)":{gridColumn:"span 4 / span 4"},"@media (min-width: 1750px)":{gridColumn:"span 5 / span 5"},"@media (min-width: 1950px)":{gridColumn:"span 6 / span 6"}},B={display:"none",width:"100%",flexShrink:"0","@media (min-width: 500px)":{display:"block",width:"fit-content"}},V=a.Z.button({"@media (min-width: 500px)":{display:"none"}})}}]);