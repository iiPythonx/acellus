"use strict";(self.webpackChunkacellus=self.webpackChunkacellus||[]).push([[4751],{14751:function(e,r,n){n.r(r),n.d(r,{default:function(){return g}});var t=n(1413),i=n(29439),a=n(4942),o=n(43681),l=n(47313),s=n(72159),d=n(58500),c=n(41066),u=n(98592),m=n(44531),v=n(58229),h=n(16533),f=n(72363),p=n(92109),x=n(81570),I=n(46417),b=5,j=/mediaServers\[(\d+)\]\.(.+)/,S=function(){return(0,a.Z)({},crypto.randomUUID(),{})};function g(){var e=(0,c.Av)().mediaServerSettings,r=(0,l.useState)(S),n=(0,i.Z)(r,2),o=n[0],g=n[1],k=Object.entries(o),A=function(e){F(!0),g((function(r){var n=(0,t.Z)({},r);return delete n[e],(0,v.z)(n)&&(n[crypto.randomUUID()]={}),n}))};(0,l.useEffect)((function(){var r;if(null===e||void 0===e||null===(r=e.mediaServers)||void 0===r||!r.length)return g(S);g(Object.fromEntries(e.mediaServers.map((function(e){return[crypto.randomUUID(),e]}))))}),[null===e||void 0===e?void 0:e.mediaServers]);var N=(0,p.Z)((function(e,r,n){if(null!==r&&void 0!==r&&r.length){var t=e.match(j),a=(0,i.Z)(t,3),o=a[0],l=a[1],s=a[2];if(o){var d=Number(l);((n.servers=n.servers||[])[d]=n.servers[d]||{})[s]=r}}}),(function(e){var r,n=!0;return(null===(r=e.servers)||void 0===r?void 0:r.length)>0&&e.servers.forEach((function(e,r){var t,i;null!==(t=e.onlineIP)&&void 0!==t&&t.length||(n=!O("mediaServers[".concat(r,"].onlineIP"),"Online IP Address is Required.")),null!==(i=e.localIP)&&void 0!==i&&i.length||(n=!O("mediaServers[".concat(r,"].localIP"),"Local IP Address is Required."))})),n})),U=N.fetcher,B=N.errors,L=N.isDirty,F=N.setIsDirty,O=N.setError,E=N.handleSubmit,V=N.handleChangeAndFocus,R=N.handleBlur,T=(0,h.G)("Leave without saving?",L).toastRef;return(0,l.useEffect)((function(){return(0,v.Oo)("toast-confirm",(function(e){e.detail.id===T.current&&e.detail.confirmed&&F(!1)}))}),[F,T]),(0,I.jsx)(m.SubpageWrapper,{"data-testid":"servers-wrapper",children:(0,I.jsxs)(U.Form,{noValidate:!0,action:"/teacher/settings",method:"post",onSubmit:E,children:[(0,I.jsx)(P,{children:(0,I.jsxs)(y,{children:[(0,I.jsx)("h2",{children:"Media Servers"}),k.length<b&&(0,I.jsx)(f.Z,{color:"teacherBlue",onClick:function(){g((function(e){return(0,t.Z)((0,t.Z)({},e),{},(0,a.Z)({},crypto.randomUUID(),{}))})),F(!0)},colorNum:600,"data-testid":"add-server-button",type:"button",children:"Add Server"})]})}),(0,I.jsx)(Z,{children:0===k.length?(0,I.jsx)("input",{type:"hidden",name:"mediaServers"}):k.map((function(e,r){var n=(0,i.Z)(e,2),t=n[0],a=n[1];return(0,I.jsx)("div",{children:(0,I.jsxs)(C,{children:[(0,I.jsxs)(d.n5,{children:[(0,I.jsx)(d.Yk,{children:(0,I.jsx)(s.II,{type:"text",name:"mediaServers[".concat(r,"].description"),error:B["mediaServers[".concat(r,"].description")],defaultValue:a.description,labelText:"Description",placeholder:"Description",onBlur:R,onChange:V,onFocus:V})}),(0,I.jsx)(d.fY,{children:(0,I.jsx)(s.II,{type:"text",name:"mediaServers[".concat(r,"].serialNumber"),error:B["mediaServers[".concat(r,"].serialNumber")],defaultValue:a.serialNumber,labelText:"Serial Number",placeholder:"Serial Number",onBlur:R,onChange:V,onFocus:V})}),(0,I.jsx)(d.fY,{children:(0,I.jsx)(s.II,{type:"text",name:"mediaServers[".concat(r,"].localIP"),error:B["mediaServers[".concat(r,"].localIP")],defaultValue:a.localIP,pattern:v.d4.source,labelText:"Local IP Address",placeholder:"Local IP Address",onBlur:R,onChange:V,onFocus:V})}),(0,I.jsx)(d.fY,{children:(0,I.jsx)(s.II,{type:"text",name:"mediaServers[".concat(r,"].onlineIP"),error:B["mediaServers[".concat(r,"].onlineIP")],defaultValue:a.onlineIP,pattern:v.d4.source,labelText:"Online IP Address",placeholder:"Online IP Address",onBlur:R,onChange:V,onFocus:V})}),(0,I.jsx)(w,{onClick:function(){return A(t)},color:"red",colorNum:500,children:"Remove Server"})]}),(0,I.jsx)(D,{onClick:function(){return A(t)},"aria-label":1===k.length?"Clear":"Delete","data-tooltip":"title",type:"button",children:(0,I.jsx)(u.p,{"data-testid":"delete-server-button","aria-hidden":"true"})})]})},t)}))}),(0,I.jsx)(d.ZL,{isSubmitting:"submitting"===U.state,error:U.data instanceof x.Z||!(0,v.z)(B),noBottomPadding:!0})]})})}var y=o.Z.div({display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"}),Z=o.Z.div({display:"flex",flexDirection:"column"}),P=o.Z.div({display:"flex",maxWidth:"150rem",flexDirection:"row",justifyContent:"space-between"}),C=o.Z.div({display:"flex",alignItems:"center"}),w=(0,o.Z)(f.Z)({gridColumn:"span 12 / span 12",width:"100%","@media (min-width: 1024px)":{display:"none"}}),D=o.Z.button({position:"relative",marginLeft:"0.5rem",display:"none","@media (min-width: 1024px)":{display:"block"},"@media (min-width: 1280px)":{marginLeft:"1rem"}})}}]);