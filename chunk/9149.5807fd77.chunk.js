"use strict";(self.webpackChunkacellus=self.webpackChunkacellus||[]).push([[9149],{2984:function(t,e,r){r.d(e,{Z:function(){return s}});var a=r(43681),n=r(47012),i=r(73529),o=r(46417);function s(t){var e=t.open,r=t.bellStyles,a=t.setInternalNewNotifications,n=t.internalNewNotifications;return(0,o.jsxs)(l,{onClick:function(){return a(!1)},"aria-label":"Notifications","data-tooltip":"title",open:e,bellStyles:r,children:[(0,o.jsx)(c,{"aria-hidden":"true"}),(0,o.jsx)(d,{show:n})]})}var l=(0,a.Z)(n.J.Button)((function(t){var e=t.bellStyles,r=t.open;return[{position:"relative",borderRadius:"9999px",padding:"0.625rem",outline:"2px solid transparent",outlineOffset:"2px","--tw-ring-offset-shadow":"var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color)","--tw-ring-shadow":"var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color)",boxShadow:"var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)","--tw-ring-color":"transparent",transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"300ms"},e?[e[0],r&&e[1]]:[{position:"relative",borderRadius:"9999px","--tw-text-opacity":"1",color:"rgb(107 114 128 / var(--tw-text-opacity))",":hover":{"--tw-text-opacity":"1",color:"rgb(75 85 99 / var(--tw-text-opacity))"},":focus":{"--tw-text-opacity":"1",color:"rgb(75 85 99 / var(--tw-text-opacity))","--tw-ring-opacity":"1","--tw-ring-color":"rgb(55 106 215 / var(--tw-ring-opacity))"},"@media (min-width: 1024px)":{zIndex:"53"}},r&&{"--tw-ring-opacity":"1","--tw-ring-color":"rgb(55 106 215 / var(--tw-ring-opacity))"}]]})),c=(0,a.Z)(i.r)({position:"relative",height:"2.25rem",width:"2.25rem"}),d=a.Z.span((function(t){return[{position:"absolute",right:"0.5rem",top:"0.5rem",display:"none","--tw-translate-y":"-50%",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))","--tw-translate-x":"50%",borderRadius:"9999px","--tw-bg-opacity":"1",backgroundColor:"rgb(239 68 68 / var(--tw-bg-opacity))",padding:"0.375rem","@media (min-width: 640px)":{right:"1.25rem",top:"1rem"}},t.show&&{display:"block"}]}))},64076:function(t,e,r){r.d(e,{ZP:function(){return G}});var a,n=r(30168),i=r(74165),o=r(93433),s=r(15861),l=r(29439),c=r(43681),d=r(47012),p=r(47313),u=r(58467),f=r(2135),h=r(32547),w=r(60199),v=r(58222),g=["title","titleId"];function m(){return m=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},m.apply(this,arguments)}function x(t,e){if(null==t)return{};var r,a,n=function(t,e){if(null==t)return{};var r,a,n={},i=Object.keys(t);for(a=0;a<i.length;a++)r=i[a],e.indexOf(r)>=0||(n[r]=t[r]);return n}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function b(t,e){var r=t.title,n=t.titleId,i=x(t,g);return p.createElement("svg",m({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"{1.5}",stroke:"currentColor",className:"w-6 h-6",ref:e,"aria-labelledby":n},i),r?p.createElement("title",{id:n},r):null,a||(a=p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0M3.124 7.5A8.969 8.969 0 015.292 3m13.416 0a8.969 8.969 0 012.168 4.5"})))}var y=p.forwardRef(b),k=(r.p,r(77533));var j,I=r(99027),Z=r(67192),D=r(57830),C=r(11360),T=r(58229),N=r(35667),S=r(79250),O=r(36712),H=r(90628),R=r(41543),F=r(46417);function G(t){var e=t.acellusID,r=t.newNotifications,a=void 0!==r&&r,n=t.bellStyles,i=t.positionStyles,o=t.children,s=(0,p.useState)(a),c=(0,l.Z)(s,2),d=c[0],u=c[1];return(0,p.useEffect)((function(){e&&h.Z.get({acellusID:e,list:!0,notification:!0,limit:12}).then((function(t){var e;(null===(e=t.posts)||void 0===e?void 0:e.some((function(t){return t.unread})))&&u(!0)}))}),[e]),(0,F.jsx)(E,{children:function(t){var r=t.open,a=t.close;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(P,{open:r,bellStyles:n,setInternalNewNotifications:u,internalNewNotifications:d,children:o}),(0,F.jsx)(O.Z,{id:"notification-panel",maxHeight:X,positionStyles:i,children:r&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(L,{acellusID:e}),(0,F.jsx)(q,{onClick:a,children:(0,F.jsx)(K,{})})]})})]})}})}var P=function(t){var e=t.open,r=t.bellStyles,a=t.setInternalNewNotifications,n=t.internalNewNotifications,i=t.children,o=p.Children.map(i,(function(t){return p.cloneElement(t,{open:e,bellStyles:r,setInternalNewNotifications:a,internalNewNotifications:n})}));return(0,F.jsx)(F.Fragment,{children:o})},E=(0,c.Z)(d.J)({position:"relative"});function L(t){var e=t.acellusID,r=(0,p.useMemo)((function(){return B({acellusID:e})}),[e]);return(0,F.jsx)(p.Suspense,{fallback:(0,F.jsx)(S.Z,{}),children:(0,F.jsx)(u.KP,{resolve:r,errorElement:(0,F.jsx)(R.Z,{}),children:(0,F.jsx)(z,{acellusID:e})})})}function z(t){var e,r,a,n=t.acellusID,c=(0,p.useState)((0,u.qv)()),d=(0,l.Z)(c,2),f=d[0],w=d[1],v=(0,p.useRef)(),g=function(t){var e,r=(0,p.useRef)(void 0),a=(0,p.useState)(t),n=(0,l.Z)(a,2),i=n[0],o=n[1],s=(0,p.useCallback)((function(t){return o((function(e){return r.current="function"===typeof t?t(e):t}))}),[]);return(0,p.useEffect)((function(){return r.current=void 0}),[i]),[null!==(e=r.current)&&void 0!==e?e:i,s]}(!1),m=(0,l.Z)(g,2),x=m[0],b=m[1],y=(0,u.s0)(),k=(0,u.TH)().pathname.includes("/parent"),j=function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e){var r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.target.scrollHeight-e.target.scrollTop<=e.target.clientHeight+100&&null!==f&&void 0!==f&&f.page&&!x){t.next=3;break}return t.abrupt("return");case 3:return b(!0),t.next=6,B({acellusID:n,page:f.page});case 6:r=t.sent,w((function(t){return b(!1),{page:r.page,posts:[].concat((0,o.Z)(t.posts),(0,o.Z)(r.posts))}}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Z=function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:h.Z.postNotificationStatus({posts:[{unread:!1,postID:e.postID}],notification:!0}).catch((function(){})),2===e.postType&&y("?modal=student/course-progress&acellusID=".concat(e.acellusID,"&displayCourseID=").concat(e.displayCourseID,"&assignmentID=").concat(e.assignmentID)),4!==e.postType&&15!==e.postType||y("?modal=student/course-progress&acellusID=".concat(e.acellusID,"&displayCourseID=").concat(e.displayCourseID)),13===e.postType&&y("?modal=student/course-progress&acellusID=".concat(e.acellusID,"&displayCourseID=").concat(e.displayCourseID,"&assignmentID=").concat(e.assignmentID)),16===e.postType&&y("?modal=write-a-book&acellusID=".concat(e.acellusID),{state:{libraryID:e.libraryID}}),17===e.postType&&y("?modal=write-a-book&acellusID=".concat(e.acellusID),{state:{libraryID:e.libraryID}}),200===e.postType&&(0,I.Z)(1);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=null===f||void 0===f?void 0:f.posts;k||(D=null===(a=D)||void 0===a?void 0:a.filter((function(t){return 200!==t.postType})));var T=null===(e=D)||void 0===e?void 0:e.filter((function(t){var e=C.u3/1e3;return(0,C.aj)()-t.timestamp<=e||!t.timestamp})),S=null===(r=D)||void 0===r?void 0:r.filter((function(t){var e=C.u3/1e3;return(0,C.aj)()-t.timestamp>e}));return(0,F.jsx)(F.Fragment,{children:null!==S&&void 0!==S&&S.length||null!==T&&void 0!==T&&T.length?(0,F.jsxs)(W,{children:[(0,F.jsx)(Y,{children:"Notifications"}),(0,F.jsx)(M,{ref:v,onScroll:j,newFeedLength:null===T||void 0===T?void 0:T.length,children:(0,F.jsxs)(J,{children:[(null===T||void 0===T?void 0:T.length)>0&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(it,{atTop:!0,children:"NEW"}),(0,F.jsx)(V,{children:T.map((function(t){return(0,F.jsx)(A,{post:t,handleNotificationClick:Z},t.postID)}))})]}),(null===S||void 0===S?void 0:S.length)>0&&(0,F.jsxs)(F.Fragment,{children:[(null===T||void 0===T?void 0:T.length)>0&&(0,F.jsx)(it,{atTop:!0,children:"EARLIER"}),(0,F.jsx)(V,{children:S.map((function(t){return(0,F.jsx)(A,{post:t,handleNotificationClick:Z},t.postID)}))})]})]})})]}):(0,F.jsx)(st,{children:(0,F.jsx)(N.Z,{whiteText:!1,title:"No Notifications",subtext:"There are no notifications to show yet.",children:(0,F.jsx)(lt,{})})})})}function A(t){var e=t.children,r=t.post,a=t.handleNotificationClick,n=[function(t){var e=t.type,r=t.post;return e.notificationTitleFunction?e.notificationTitleFunction(r):e.titleFunction(r)}({type:(0,Z.xR)(r.postType),post:r}),r.subtext].filter((function(t){return void 0!==t})).join(" - ");return(0,F.jsxs)($,{unread:r.unread,children:[(0,F.jsxs)(Q,{children:[(0,F.jsx)(H.Z,{acellusID:r.acellusID,name:"".concat(r.profile.firstName," ").concat(r.profile.lastName),to:"?modal=student/report-card&acellusID=".concat(r.acellusID),tooltip:"View ".concat((0,D.k$)(r.profile.firstName)," Profile")}),(0,F.jsxs)(U,{onClick:function(){return a(r)},children:[(0,F.jsxs)(_,{children:[(0,F.jsx)(tt,{children:(0,T.Pp)(r.profile)}),r.to&&("function"===typeof r.to?(0,F.jsx)(et,{onClick:r.to,children:(0,F.jsx)(rt,{"aria-hidden":!0})}):(0,F.jsx)(et,{as:f.Link,to:r.to,children:(0,F.jsx)(rt,{"aria-hidden":!0})}))]}),(0,F.jsx)(at,{"data-tooltip":"title",className:"tooltip-overflow","aria-label":n,children:n})]})]}),e?(0,F.jsx)(nt,{children:e&&"function"===typeof e?e({profile:r.profile}):e}):(0,F.jsx)(ot,{children:(0,C.No)(r.timestamp)})]})}var B=function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e){var r,a,n,o;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.acellusID,a=e.page,n=new AbortController,t.next=4,h.Z.get({list:!0,notification:!0,limit:12,page:a,acellusID:r},n.signal).then(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e){var r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==e&&void 0!==e&&e.posts){t.next=2;break}return t.abrupt("return",e);case 2:return r=new Set(e.posts.map((function(t){return t.acellusID}))),t.next=5,Promise.all(Array.from(r).map((function(t){return w.Z.get(t,n.signal).then((function(r){return e.posts.filter((function(e){return e.acellusID===t})).map((function(t){return t.profile=r}))})).catch((function(t){return toast.error(t.message)}))})));case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){return toast.error("There was an error getting your activities.")}));case 4:return o=t.sent,t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),W=c.Z.div({height:"var(--unit100vh)",overflow:"hidden","--cardGap":"1rem;","--cardHeight":"6.7rem;","--headerHeight":"3.4rem;","--numberOfCards":"3","--timeTextHeight":"3.4rem;","@media (min-width: 640px)":{height:"fit-content"},"@media (min-width: 1750px)":{"--cardHeight":"7.7rem;"},"@media (min-height: 490px)":{"--numberOfCards":"4"},"@media (min-height: 576px)":{"--numberOfCards":"5"}}),X={},Y=c.Z.h2({paddingLeft:"var(--cardGap)",paddingRight:"var(--cardGap)",paddingTop:"var(--cardGap)"}),M=c.Z.div((function(t){var e=t.newFeedLength;return[{height:"calc(100% - var(--headerHeight))",overflowY:"auto",overflowX:"hidden","::-webkit-scrollbar-track":{marginTop:"var(--timeTextHeight)"},"@media (min-width: 640px)":{"::-webkit-scrollbar-track":{marginBottom:"1rem"}},"@media (max-height: 541px) and (max-width: 1025px)":{height:"calc(100% - var(--headerHeight)) !important"},"@media (pointer: coarse)":{scrollSnapType:"y var(--tw-scroll-snap-strictness)","--tw-scroll-snap-strictness":"mandatory",scrollPaddingTop:"var(--timeTextHeight)"}},e>=5?{"@media (min-width: 640px)":{height:"calc(1 * var(--timeTextHeight) + var(--numberOfCards) * var(--cardHeight) + var(--numberOfCards) * var(--cardGap))"}}:e<5&&e>0?{"@media (min-width: 640px)":{height:"calc((2 * var(--timeTextHeight)) + var(--numberOfCards) * var(--cardHeight) + (var(--numberOfCards) - 1) * var(--cardGap))"}}:{"@media (min-width: 640px)":{height:"calc(var(--numberOfCards) * var(--cardHeight) + var(--numberOfCards) * var(--cardGap))"}}]})),J=c.Z.div({paddingBottom:"var(--cardGap)"}),V=c.Z.div({display:"flex",flexDirection:"column",gap:"var(--cardGap)"}),q=c.Z.button({position:"absolute",right:"1rem",top:"1rem",zIndex:"10"}),K=(0,c.Z)(k.r)({height:"2rem",width:"2rem",strokeWidth:"2","--tw-text-opacity":"1",color:"rgb(107 114 128 / var(--tw-text-opacity))","@media (min-width: 640px)":{display:"none","@media (orientation: portrait)":{display:"none"}},"@media (max-height: 541px) and (max-width: 1025px)":{display:"flex"}}),$=c.Z.div((function(t){return[{marginLeft:"var(--cardGap)",marginRight:"var(--cardGap)",display:"flex","@keyframes fadeIn":{"0%":{opacity:"0"},"100%":{opacity:"1"}},animation:"fadeIn 0.5s ease-in",scrollSnapAlign:"start",alignItems:"center",justifyContent:"space-between",borderRadius:"0.75rem",borderWidth:"1px",padding:"0.75rem","--tw-text-opacity":"1",color:"rgb(31 41 55 / var(--tw-text-opacity))","--tw-shadow":"0 1px 2px 0 rgb(0 0 0 / 0.05)","--tw-shadow-colored":"0 1px 2px 0 var(--tw-shadow-color)",boxShadow:"var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)",transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"300ms","@media (min-width: 1750px)":{paddingTop:"1.25rem",paddingBottom:"1.25rem"}},{cursor:"pointer",":hover":{"--tw-shadow":"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)","--tw-shadow-colored":"0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color)",boxShadow:"var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)"}},t.unread?{borderColor:"rgb(209 213 219 / 0.8)","--tw-bg-opacity":"1",backgroundColor:"rgb(243 244 246 / var(--tw-bg-opacity))"}:{borderColor:"rgb(209 213 219 / 0.9)","--tw-bg-opacity":"1",backgroundColor:"rgb(229 231 235 / var(--tw-bg-opacity))"}]})),Q=c.Z.div({display:"flex",width:"0px",flex:"1 1 0%",alignItems:"center",gap:"1.5rem"}),U=c.Z.div({width:"0px",flex:"1 1 0%",textAlign:"left"}),_=c.Z.div({display:"flex",gap:"1rem"}),tt=c.Z.span({display:"block",width:"auto",fontSize:"1.6rem",fontWeight:"500"}),et=c.Z.button({display:"flex",flexDirection:"column",justifyContent:"flex-start",paddingRight:"1rem",transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"300ms",":hover":{"--tw-scale-x":"1.05","--tw-scale-y":"1.05",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))"}}),rt=(0,c.Z)(v.r)({height:"2rem",justifyContent:"flex-start","--tw-text-opacity":"1",color:"rgb(156 163 175 / var(--tw-text-opacity))"}),at=c.Z.span({display:"block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"1.4rem","--tw-text-opacity":"1",color:"rgb(75 85 99 / var(--tw-text-opacity))"}),nt=c.Z.div({display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",paddingRight:"0.5rem","@media (min-width: 500px)":{gap:"1rem"}}),it=c.Z.span((function(t){var e=t.color,r=t.noText;return[{position:"sticky",top:"-1.5px",zIndex:"10",display:"block",borderBottomWidth:"1px","--tw-border-opacity":"1",borderColor:"rgb(255 255 255 / var(--tw-border-opacity))",backgroundImage:"linear-gradient(to top, var(--tw-gradient-stops))","--tw-gradient-from":"rgb(255 255 255 / 0.4) var(--tw-gradient-from-position)","--tw-gradient-to":"#fff var(--tw-gradient-to-position)","--tw-gradient-stops":"var(--tw-gradient-from), var(--tw-gradient-to)",paddingLeft:"var(--cardGap)",paddingRight:"var(--cardGap)",fontSize:"1.2rem","--tw-text-opacity":"1",color:"rgb(107 114 128 / var(--tw-text-opacity))"},t.atTop&&[e,{"--tw-backdrop-blur":"blur(8px)",backdropFilter:"var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)"}],r?{height:"1.5rem"}:{paddingTop:"0.75rem",paddingBottom:"0.75rem"}]})),ot=c.Z.div(j||(j=(0,n.Z)(["\n  align-self: stretch;\n  color: #808080;\n"]))),st=c.Z.div({marginLeft:"1.5rem",marginRight:"1.5rem",display:"flex",height:"64%",flexDirection:"column",alignItems:"center",justifyContent:"center",scrollBehavior:"smooth","--tw-text-opacity":"1",color:"rgb(255 255 255 / var(--tw-text-opacity))"}),lt=(0,c.Z)(y)({height:"5rem !important",strokeWidth:"1.2","--tw-text-opacity":"1",color:"rgb(83 126 220 / var(--tw-text-opacity))"})}}]);