"use strict";(self.webpackChunkacellus=self.webpackChunkacellus||[]).push([[5111],{31423:function(e,t,r){r.d(t,{r:function(){return u}});var n,a=r(47313),i=["title","titleId"];function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function s(e,t){var r=e.title,s=e.titleId,u=l(e,i);return a.createElement("svg",o({className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":s},u),r?a.createElement("title",{id:s},r):null,n||(n=a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})))}var u=a.forwardRef(s);r.p},81391:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(43681),a=r(47313),i=r(46417);function o(e){var t=e.label,r=e.name,n=e.onChange,o=e.checked,c=(0,a.useId)();return(0,i.jsxs)(l,{htmlFor:c,children:[(0,i.jsx)(s,{"data-testid":"radio-input",type:"radio",id:c,name:r,checked:o,onChange:n}),(0,i.jsx)(u,{children:t})]})}var l=n.Z.label({display:"flex",width:"100%",cursor:"pointer",alignItems:"center",gap:"1rem",borderRadius:"0.5rem",transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"200ms",":hover":{"--tw-bg-opacity":"1",backgroundColor:"rgb(243 244 246 / var(--tw-bg-opacity))"},"@media (min-width: 1024px)":{marginLeft:"0px !important"}}),s=n.Z.input({height:"1.5rem",width:"1.5rem","--tw-border-opacity":"1",borderColor:"rgb(209 213 219 / var(--tw-border-opacity))",padding:"0.5rem",":focus":{"--tw-ring-opacity":"1","--tw-ring-color":"rgb(83 126 220 / var(--tw-ring-opacity))"}}),u=n.Z.span({cursor:"pointer",fontSize:"1.5rem","--tw-text-opacity":"1",color:"rgb(75 85 99 / var(--tw-text-opacity))","@media (min-width: 1280px)":{fontSize:"1.6rem"}})},65111:function(e,t,r){r.r(t),r.d(t,{default:function(){return j}});var n=r(1413),a=r(74165),i=r(15861),o=r(29439),l=r(43681),s=r(47313),u=r(31423),c=r(26236),d=r(20388),f=r(13797),p=r(81391),h=r(46959),m=r(7752),v=r(60199),g=r(12264),x=r(95820),b=r(25067),y=r(57830),w=r(58229),S=r(46417),Z=["School","Grade Level","Course","Student"];function j(){var e=(0,s.useState)(""),t=(0,o.Z)(e,2),r=t[0],l=t[1],j=(0,s.useState)(!1),D=(0,o.Z)(j,2),P=D[0],R=D[1],L=(0,s.useState)(!1),N=(0,o.Z)(L,2),F=N[0],z=N[1],B=(0,s.useState)(),G=(0,o.Z)(B,2),M=G[0],U=G[1],W=(0,s.useState)(null),q=(0,o.Z)(W,2),A=q[0],Q=q[1],T=(0,s.useState)(w.ny[0]),V=(0,o.Z)(T,2),H=V[0],J=V[1],K=(0,s.useState)(!1),X=(0,o.Z)(K,2),Y=X[0],$=X[1],_=(0,s.useState)(null),ee=(0,o.Z)(_,2),te=ee[0],re=ee[1],ne=(0,s.useState)(Z[0]),ae=(0,o.Z)(ne,2),ie=ae[0],oe=ae[1],le=(0,s.useState)(!1),se=(0,o.Z)(le,2),ue=se[0],ce=se[1];(0,s.useEffect)((function(){$(!1),ce(!1),U(),J(w.ny[0]),re(null),Q(null),l("")}),[ie]);var de=function(){var e={};if("Grade Level"===ie)e.gradeLevel=H.value;else if("Course"===ie){if(null===te||void 0===te||!te.displayCourseID)return $("Please Select a Course"),!1;e.displayCourseID=te.displayCourseID}else if("Student"===ie){if(null===te||void 0===te||!te.acellusID)return $("Please Select a Student"),!1;e.acellusID=te.acellusID}return e},fe=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ce(!1),t=de()){e.next=4;break}return e.abrupt("return");case 4:return R(!0),e.prev=5,e.next=8,g.Z.getSignInCards(t);case 8:if(r=e.sent,!(0,b.isErrorResponse)(r)){e.next=14;break}return ce(!0),R(!1),toast.error("Error Exporting File"),e.abrupt("return");case 14:if(r instanceof Blob&&!(r.size<37)){e.next=19;break}return ce(!0),R(!1),toast.alert("No Data to Export"),e.abrupt("return");case 19:(0,w.Sv)(r,"SignInCards.pdf"),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(5),ce(!0),toast.error("Unable to reach server. Check your connection and try again.");case 26:return e.prev=26,R(!1),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[5,22,26,29]])})));return function(){return e.apply(this,arguments)}}(),pe=function(e){g.Z.postSignInCards((0,n.Z)((0,n.Z)({},e),{},{force:!0})).then((function(e){var t;return(0,b.isErrorResponse)(e)?(ce(!0),z(!1),void toast.error("Error Sending Email")):null!==(t=e.failedEmails)&&void 0!==t&&t.length?(ce(!0),U({type:"ERROR",messages:e.failedEmails.map((function(e){return"Failed to Send Email to ".concat(e)}))}),z(!1),toast.error("Email Failed to Send")):(z(!1),void window.toast.alert("Email Successfully Sent"))}))},he=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ce(!1),t=de()){e.next=4;break}return e.abrupt("return");case 4:z(!0);try{g.Z.postSignInCards(t).then((function(e){var r;null!==(r=e.noEmail)&&void 0!==r&&r.length?(z(!1),ce(!0),U({type:"ERROR",messages:e.noEmail.map((function(e){return"Missing email for ".concat((0,w.Pp)(v.Z.get(e)))}))}),toast.confirm("Missing ".concat((0,y.bh)(e.noEmail.length,"email"),". Send anyway?"),(function(e){e&&pe(t)}))):pe(t)}))}catch(r){ce(!0),z(!1),toast.error("Unable to reach server. Check your connection and try again.")}case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,S.jsxs)(C,{"data-testid":"main-wrapper",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("h2",{children:"Sign In Cards"}),(0,S.jsx)("p",{children:"Provide students with access to their account."})]}),(0,S.jsx)(k,{children:Z.map((function(e){return(0,S.jsx)(E,{children:(0,S.jsx)(p.Z,{onChange:function(){return oe(e)},label:e,name:"filter",checked:ie===e})},e)}))}),(0,S.jsx)(I,{children:"Grade Level"===ie?(0,S.jsx)(d.Z,{data:w.ny,isPlaceholder:"Select a Grade Level","data-testid":"form-select",error:Y,selected:H,onChange:function(e){J(e),e.value&&$(!1)}}):"School"!==ie?(0,S.jsx)(f.ZP,{placeholder:"Find a ".concat(ie),onSearch:function(e){var t;if(null===e||void 0===e||null===(t=e.trim)||void 0===t||!t.call(e))return Q(null);"Student"===ie?v.Z.getSearch(e,{role:"student",status:"active"}).then((function(t){var r=t.result;!r&&e.length>0&&(r=[]),Q(r)})):m.Z.get({search:e,inUse:!0}).then((function(t){var r=t.courses;!r&&e.length>0&&(r=[]),Q(r.toSorted((function(e,t){return e.courseNumber<t.courseNumber?-1:e.courseNumber>t.courseNumber?1:0})))}))},results:A,onSelection:function(e){$(!1),Q(null),re(e)},query:r,setQuery:l,format:"Student"===ie?"user":"course",autocomplete:!0,error:Y}):null}),(0,S.jsxs)(O,{children:[(0,S.jsxs)(h.Z,{color:"teacherBlue",colorNum:500,onClick:fe,isSubmitting:P,error:Y||ue,children:[(0,S.jsx)(u.r,{"data-testid":"svg"}),"Export PDF"]}),(0,S.jsxs)(h.Z,{color:"teacherBlue",colorNum:500,onClick:he,isSubmitting:F,error:Y||ue,children:[(0,S.jsx)(c.r,{"data-testid":"svg"}),"Email"]})]}),M&&(0,S.jsx)(x.Z,(0,n.Z)((0,n.Z)({},M),{},{close:function(){return U()}}))]})}var C=l.Z.div({display:"flex",flexDirection:"column",gap:"2rem"}),k=l.Z.div({display:"flex",flexDirection:"column",gap:"1rem",textAlign:"center","@media (min-width: 1024px)":{width:"100%",maxWidth:"64rem",flexDirection:"row",justifyContent:"space-between"},"@media (min-width: 1536px)":{width:"50%"},"label:hover":{backgroundColor:"transparent"}}),E=l.Z.div({width:"auto"}),I=l.Z.div({display:"flex",maxWidth:"64rem",flexDirection:"column",alignItems:"center",gap:"2rem","@media (min-width: 1024px)":{width:"50%"}}),O=l.Z.div({display:"flex",gap:"2rem"})}}]);